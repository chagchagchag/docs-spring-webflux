(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4444],{9448:function(e,r,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/spring-cloud-reactive-circuitbreaker/reactive-circuit-breaker-basic",function(){return i(4309)}])},4309:function(e,r,i){"use strict";i.r(r),i.d(r,{__toc:function(){return p},default:function(){return g}});var n=i(5893),a=i(2673),t=i(373),s=i(8426);i(9128);var o=i(2643),c={src:"/docs-spring-webflux/_next/static/media/PLAIN-MSA-COMMUNICATION.66c52dfa.png",height:459,width:986,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAXUlEQVR42jXBPQqAIBgAUO9/iAj6gYaCoJZIa8hjhKSfDW7ioqYYCb2HUgYg6qrAeLHWPuGDCFkpPYTgQ9/tG7Y/xPkFAFprxs5byhijc857j1KmlGqbcp5GY0zIXoWMVXE/nPd4AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},l={src:"/docs-spring-webflux/_next/static/media/SPRING-CLOUD-MSA.125e52a9.png",height:933,width:1829,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAY0lEQVR42h3JTQ5AMBBAYfe/hNiLU1hIyoKlyCDRMkKC+K22Q/uW7/PIdb93yxtoKqXVJa//eCiGpEwYMI7diJhC5seBhXM/upkDQj+JdVvytghZZIFcUj39KKCujDHaaCL6ACZ2WA/DiVMgAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},d={src:"/docs-spring-webflux/_next/static/media/3STATE.2cb674fd.png",height:475,width:903,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAY0lEQVR42g2KSwqAIBQAvf9VXPgWuiqXJbgosHNUmj4/vYSEgYFhmFIKAEIMueXBeZ8ghNaa7ftmjEmYqH/UKWJa18Vay47DDWHGRq28FQuO1TnH5mninF/+GrVS9Y8HEFLKHwY5UgyYw4CaAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4};let p=[{depth:2,value:"Reactive Circuit Breaker",id:"reactive-circuit-breaker"},{depth:2,value:"Plain MSA",id:"plain-msa"},{depth:2,value:"Spring Cloud Circuit Breaker 를 적용하면",id:"spring-cloud-circuit-breaker-를-적용하면"},{depth:2,value:"Spring Cloud Release",id:"spring-cloud-release"},{depth:2,value:"Resilience4j Circuit Breaker",id:"resilience4j-circuit-breaker"},{depth:2,value:"Circuit Breaker 의 3가지 상태",id:"circuit-breaker-의-3가지-상태"},{depth:2,value:"의존성",id:"의존성"}];function _createMdxContent(e){let r=Object.assign({h2:"h2",p:"p",img:"img",ul:"ul",li:"li",a:"a",pre:"pre",code:"code",span:"span"},(0,o.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"reactive-circuit-breaker",children:"Reactive Circuit Breaker"}),"\n",(0,n.jsx)(r.h2,{id:"plain-msa",children:"Plain MSA"}),"\n",(0,n.jsxs)(r.p,{children:["Spring Cloud 와 API 통신 추상화 계층이 없는 MSA의 구조는 아래와 같습니다.\r\n",(0,n.jsx)(r.img,{placeholder:"blur",src:c}),"\r\n각각의 MSA는 메시지 큐와 통신할 때에는 메시지 큐의 구체적인 종류에 따라 구현이 계속 달라지게 되고, 메시지 큐의 종류를 바꾸는 것 역시 쉽지 않습니다.",(0,n.jsx)("br",{}),"\r\n또한 API 간의 통신 시에 단절이 어떻게 되는지 판정할 방법과 Healthcheck 를 할 방법, Client 측의 Loadbalancing 등에 대한 대책이 분명하지 않습니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(r.h2,{id:"spring-cloud-circuit-breaker-를-적용하면",children:"Spring Cloud Circuit Breaker 를 적용하면"}),"\n",(0,n.jsxs)(r.p,{children:["Spring Cloud Circuit Breaker 를 적용하면 아래와 같은 방식으로 통신이 이루어집니다.\r\n",(0,n.jsx)(r.img,{placeholder:"blur",src:l})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(r.p,{children:["MSA API 간의 통신을 수행 시에 Circuit Breaker 를 통해서 통신을 하게 되고, 실패율을 측정할 수 있고, 통신에 문제가 있다고 판단되면 차단이 가능하며, OPEN, HALF_OPEN, CLOSE 등의 속성을 이용해서 HALF_OPEN 상태로 둔후 정상화 되면 다시 OPEN 되도록 하는 것이 가능해집니다.",(0,n.jsx)("br",{}),"\r\n또한 Spring Cloud Config 서버까지 적용을 하게 될 경우 설정을 property 화 해서 서버의 재기동/재배포 없이 Circuit Breaker 의 설정을 바꾸는 것으로 정상 운영이 가능해집니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(r.p,{children:["메시지 큐를 사용한 통신 시에는 Spring Cloud Stream 을 이용해서 통신을 하게 되는데 이때 실제 메시지 큐의 종류에 영향없이 Spring Cloud Stream 을 통해서 통신을 수행할 수 있습니다. 따라서 메시지 큐의 종류를 교체하더라도, 기존 로직을 새로운 메시지 큐를 사용하도록 전환하는 것이 비교적 수월해집니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(r.h2,{id:"spring-cloud-release",children:"Spring Cloud Release"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://github.com/spring-cloud/spring-cloud-release",children:"github.com - spring-cloud-release"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://github.com/spring-cloud/spring-cloud-release/wiki/Supported-Versions#supported-releases",children:"Spring Cloud Release - Supported Release"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://spring.io/projects/spring-cloud#overview",children:"spring.io/projects/spring-cloud#overivew"})}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(r.h2,{id:"resilience4j-circuit-breaker",children:"Resilience4j Circuit Breaker"}),"\n",(0,n.jsx)(r.p,{children:"Spring Cloud Circuit Breaker 는 추상화된 라이브러리이고, 구현되어 있는 구현체가 필요합니다. 이 중 Reactor 기반의 Circuit Breaker 를 지원하는 것은 현재 Resilience4j 의 Cricuit Breaiker 뿐 입니다."}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://resilience4j.readme.io/docs/circuitbreaker",children:"Resilience4j Circuit Breaker"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://github.com/resilience4j/resilience4j",children:"github.com/resilience4j/resilience4j"})}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(r.h2,{id:"circuit-breaker-의-3가지-상태",children:"Circuit Breaker 의 3가지 상태"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.img,{placeholder:"blur",src:d})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(r.h2,{id:"의존성",children:"의존성"}),"\n",(0,n.jsx)(r.p,{children:"의존성은 아래와 같습니다."}),"\n",(0,n.jsx)(r.pre,{"data-language":"kotlin","data-theme":"default",children:(0,n.jsxs)(r.code,{"data-language":"kotlin","data-theme":"default",children:[(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})}),"\n",(0,n.jsx)(r.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"repositories"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"mavenCentral"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"ext"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"set"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'springCloudVersion'"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"2023.0.0"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"dependencies"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"  implementation "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'org.springframework.cloud:spring-cloud-starter-circuitbreaker-resilience4j'"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"  testImplementation "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'org.springframework.boot:spring-boot-starter-test'"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"dependencyManagement"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"imports"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"    mavenBom "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"org.springframework.cloud:spring-cloud-dependencies:'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"springCloudVersion"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"'})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{})]})}let u={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,o.a)(),e.components);return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/spring-cloud-reactive-circuitbreaker/reactive-circuit-breaker-basic.mdx",route:"/spring-cloud-reactive-circuitbreaker/reactive-circuit-breaker-basic",timestamp:1710226167e3,pageMap:[{kind:"Folder",name:"concurrent-programming-basic",route:"/concurrent-programming-basic",children:[{kind:"MdxPage",name:"blocking-vs-nonblocking",route:"/concurrent-programming-basic/blocking-vs-nonblocking"},{kind:"MdxPage",name:"completable-future",route:"/concurrent-programming-basic/completable-future"},{kind:"MdxPage",name:"completable-stage",route:"/concurrent-programming-basic/completable-stage"},{kind:"MdxPage",name:"intro",route:"/concurrent-programming-basic/intro"},{kind:"MdxPage",name:"sync-vs-async",route:"/concurrent-programming-basic/sync-vs-async"},{kind:"Meta",data:{intro:"Intro","sync-vs-async":"동기 vs 비동기","blocking-vs-nonblocking":"블로킹 vs 논 블로킹","completable-future":"CompletableFuture","completable-stage":"CompletableStage"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"kotlin-coroutine",route:"/kotlin-coroutine",children:[{kind:"MdxPage",name:"intro",route:"/kotlin-coroutine/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"nio-and-aio",route:"/nio-and-aio",children:[{kind:"MdxPage",name:"intro",route:"/nio-and-aio/intro"},{kind:"MdxPage",name:"java-io-java-nio-java-aio",route:"/nio-and-aio/java-io-java-nio-java-aio"},{kind:"MdxPage",name:"java-nio-socket-communication",route:"/nio-and-aio/java-nio-socket-communication"},{kind:"MdxPage",name:"what-is-aio",route:"/nio-and-aio/what-is-aio"},{kind:"MdxPage",name:"what-is-nio",route:"/nio-and-aio/what-is-nio"},{kind:"Meta",data:{intro:"Intro","java-io-java-nio-java-aio":"Java IO,NIO,AIO","what-is-nio":"NIO 의 개념, 특징, 주요 클래스","java-nio-socket-communication":"Java NIO 소켓통신","what-is-aio":"AIO 의 개념, 특징, 예제"}}]},{kind:"Folder",name:"r2dbc-mysql",route:"/r2dbc-mysql",children:[{kind:"MdxPage",name:"example",route:"/r2dbc-mysql/example"},{kind:"MdxPage",name:"intro",route:"/r2dbc-mysql/intro"},{kind:"MdxPage",name:"what-is-r2dbc",route:"/r2dbc-mysql/what-is-r2dbc"},{kind:"Meta",data:{intro:"Intro","what-is-r2dbc":"R2DBC 란?",example:"예제"}}]},{kind:"Folder",name:"reactive-mongodb",route:"/reactive-mongodb",children:[{kind:"MdxPage",name:"example",route:"/reactive-mongodb/example"},{kind:"MdxPage",name:"intro",route:"/reactive-mongodb/intro"},{kind:"Meta",data:{intro:"Intro",example:"예제"}}]},{kind:"Folder",name:"reactive-programming",route:"/reactive-programming",children:[{kind:"MdxPage",name:"intro",route:"/reactive-programming/intro"},{kind:"MdxPage",name:"java-nio-bad-point-and-solution",route:"/reactive-programming/java-nio-bad-point-and-solution"},{kind:"MdxPage",name:"netflix-rxjava-story",route:"/reactive-programming/netflix-rxjava-story"},{kind:"MdxPage",name:"proactor-pattern",route:"/reactive-programming/proactor-pattern"},{kind:"MdxPage",name:"reactive-streams-backpressure",route:"/reactive-programming/reactive-streams-backpressure"},{kind:"MdxPage",name:"reactive-streams-libraries",route:"/reactive-programming/reactive-streams-libraries"},{kind:"MdxPage",name:"reactive-streams",route:"/reactive-programming/reactive-streams"},{kind:"MdxPage",name:"reactor-pattern",route:"/reactive-programming/reactor-pattern"},{kind:"MdxPage",name:"what-is-epoll",route:"/reactive-programming/what-is-epoll"},{kind:"MdxPage",name:"what-is-reactive",route:"/reactive-programming/what-is-reactive"},{kind:"Meta",data:{intro:"intro","what-is-reactive":"Reactive란?","netflix-rxjava-story":"Netflix RxJava 이야기","reactive-streams":"Reactive Streams - Publisher, Subscriber 개념, 예제","reactive-streams-libraries":"Reactive Streams 라이브러리들","reactive-streams-backpressure":"Spring Webflux 의 배압(Backpressure)","java-nio-bad-point-and-solution":"Java NIO 의 논블로킹 방식 동기연산의 문제점과 해결책, 멀티플렉싱","what-is-epoll":"epoll 이란?","reactor-pattern":"reactor 패턴","proactor-pattern":"proactor 패턴"}}]},{kind:"Folder",name:"server-sent-event",route:"/server-sent-event",children:[{kind:"MdxPage",name:"example",route:"/server-sent-event/example"},{kind:"MdxPage",name:"intro",route:"/server-sent-event/intro"},{kind:"MdxPage",name:"what-is-sse",route:"/server-sent-event/what-is-sse"},{kind:"Meta",data:{intro:"Intro","what-is-sse":"SSE (Server Sent Event) 의 개념",example:"예제코드"}}]},{kind:"Folder",name:"spring-cloud-reactive-circuitbreaker",route:"/spring-cloud-reactive-circuitbreaker",children:[{kind:"MdxPage",name:"intro",route:"/spring-cloud-reactive-circuitbreaker/intro"},{kind:"MdxPage",name:"reactive-circuit-breaker-basic",route:"/spring-cloud-reactive-circuitbreaker/reactive-circuit-breaker-basic"},{kind:"Meta",data:{intro:"Introduce","reactive-circuit-breaker-basic":"Reactive Cricuit Breaker"}}]},{kind:"Folder",name:"spring-cloud-stream-and-kafka",route:"/spring-cloud-stream-and-kafka",children:[{kind:"MdxPage",name:"intro",route:"/spring-cloud-stream-and-kafka/intro"},{kind:"MdxPage",name:"kafka-basic",route:"/spring-cloud-stream-and-kafka/kafka-basic"},{kind:"MdxPage",name:"kafka-docker-compose",route:"/spring-cloud-stream-and-kafka/kafka-docker-compose"},{kind:"MdxPage",name:"spring-cloud-stream-kafka-binder",route:"/spring-cloud-stream-and-kafka/spring-cloud-stream-kafka-binder"},{kind:"MdxPage",name:"spring-cloud-stream",route:"/spring-cloud-stream-and-kafka/spring-cloud-stream"},{kind:"Meta",data:{intro:"Intro","kafka-basic":"Kafka 의 주요 개념들","kafka-docker-compose":"Kafak 로컬 개발환경 (docker-compose)","spring-cloud-stream":"Spring Cloud Stream","spring-cloud-stream-kafka-binder":"Spring Cloud Stream Kafka Binder"}}]},{kind:"Folder",name:"spring-webflux",route:"/spring-webflux",children:[{kind:"MdxPage",name:"annotated-controller",route:"/spring-webflux/annotated-controller"},{kind:"MdxPage",name:"codec",route:"/spring-webflux/codec"},{kind:"MdxPage",name:"dispatcher-handler-communication-spring-webflux",route:"/spring-webflux/dispatcher-handler-communication-spring-webflux"},{kind:"MdxPage",name:"intro",route:"/spring-webflux/intro"},{kind:"MdxPage",name:"servlet-stack-vs-reactive-stack",route:"/spring-webflux/servlet-stack-vs-reactive-stack"},{kind:"MdxPage",name:"spring-mvc-vs-spring-webflux",route:"/spring-webflux/spring-mvc-vs-spring-webflux"},{kind:"Meta",data:{intro:"Intro","servlet-stack-vs-reactive-stack":"Servlet Stack vs Reactive Stack","spring-mvc-vs-spring-webflux":"Spring MVC vs Spring Webflux","dispatcher-handler-communication-spring-webflux":"DispatcherHandler 와 Spring Webflux","annotated-controller":"Annotated Controller",codec:"Codec"}}]},{kind:"Folder",name:"webflux-websocket",route:"/webflux-websocket",children:[{kind:"MdxPage",name:"example",route:"/webflux-websocket/example"},{kind:"MdxPage",name:"intro",route:"/webflux-websocket/intro"},{kind:"Meta",data:{intro:"Intro",example:"예제"}}]},{kind:"Meta",data:{index:"Introduction","concurrent-programming-basic":"동시성 프로그래밍 개념들","nio-and-aio":"NIO, AIO","reactive-programming":"Reactive Programming","spring-webflux":"Spring Webflux","spring-cloud-stream-and-kafka":"Spring Cloud Stream & Kafka","spring-cloud-reactive-circuitbreaker":"Spring Cloud Reactive Circuit Breaker","kotlin-coroutine":"Kotlin Coroutine","server-sent-event":"Server Sent Event (SSE)","webflux-websocket":"Webflux Websocket","r2dbc-mysql":"Spring Data R2dbc","reactive-mongodb":"Spring Data Reactive Mongodb",contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"Reactive Circuit Breaker Basic",headings:p},pageNextRoute:"/spring-cloud-reactive-circuitbreaker/reactive-circuit-breaker-basic",nextraLayout:t.ZP,themeConfig:s.Z};var g=(0,a.j)(u)},8426:function(e,r,i){"use strict";var n=i(5893);i(7294);let a={logo:(0,n.jsx)("span",{children:"Docs Spring Webflux"}),project:{link:"https://github.com/chagchagchag/docs-spring-webflux"},docsRepositoryBase:"https://github.com/chagchagchag/docs-spring-webflux",footer:{text:"Nextra Docs Template"}};r.Z=a},5789:function(){}},function(e){e.O(0,[9774,6796,2888,179],function(){return e(e.s=9448)}),_N_E=e.O()}]);