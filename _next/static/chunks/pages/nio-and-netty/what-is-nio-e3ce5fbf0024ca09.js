(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{5298:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nio-and-netty/what-is-nio",function(){return r(8215)}])},8215:function(e,n,r){"use strict";r.r(n),r.d(n,{__toc:function(){return j},default:function(){return v}});var s=r(5893),i=r(2673),t=r(373),l=r(8426);r(9128);var a=r(2643),o={src:"/docs-spring-webflux/_next/static/media/CHANNEL-BUFFER.1dc73195.png",height:122,width:643,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAPUlEQVR42gEyAM3/AKqqqNPS0vDw8JualsHBv/Dw8aWkoKWkoQCnpqTPz87y8vOioZ7DwsHx8fK3trS2trSL+iRkgI844AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2},c={src:"/docs-spring-webflux/_next/static/media/KIND-OF-BUFFER-TYPES.2cf9b5b2.png",height:569,width:1102,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAaElEQVR42mP49+/f////f//+febMqU+fPv2HAQYgvn796tevX4GMp0+fnj1z+u6dO7t2bWc4f+7MsaOHDuzf/enTR6DQnFnT7t+/d/jQAQagIS9ePF+9aunbt2+ePHkClPjz5+////8B6XFUIIsL11sAAAAASUVORK5CYII=",blurWidth:8,blurHeight:4},h={src:"/docs-spring-webflux/_next/static/media/BUFFER-POSITION-CURSORS-1.5d71ad63.png",height:229,width:505,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAAAAACWpiEsAAAAJklEQVR42g3BgQ0AIAgDsP1/rokISDbWouvbu4gay0CMrA8kkppcMywfXp3v3koAAAAASUVORK5CYII=",blurWidth:8,blurHeight:4},d={src:"/docs-spring-webflux/_next/static/media/FLIP.f350b0b2.png",height:739,width:640,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAAAAAAQb7raAAAANUlEQVR42g3FwRHAMAwCMPZft+fUBhcafQTN0+oXVCt7kMSxkK1enrucEDH5LWH3WIWdmsQ/3QE29C6fT8kAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},x={src:"/docs-spring-webflux/_next/static/media/REWIND.39a1eb92.png",height:595,width:603,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAAAAADhZOFXAAAAO0lEQVR42hXJwRHAMAgDQfpvN3EkhAyxfze3kXhJLoY3tv1lUM/MOCPPZpVC3knf0LILh4DuBgOUSuIPxWc+ZhmQ1gIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},p={src:"/docs-spring-webflux/_next/static/media/CLEAR.23bb93fd.png",height:621,width:603,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAAAAADhZOFXAAAAOklEQVR42hWKwRHAMAjD2H/cXkuwMVCipyTDeYH4YJJXyWGBZ6YFW32cmUYVKdLyBADPTdM9d04tHj/FXj5vgGF3zAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},k={src:"/docs-spring-webflux/_next/static/media/SELECTABLE-CHANNEL.daf7fa84.png",height:438,width:616,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAkklEQVR42mP4////79+/Z0yf3NtV19RQ8eTJE6DI379/GYDUv3//Pn78+PTp0xcvXgAVQUQYgCRQvq21qTA7KMjX+ubNm0CJP3/+ACVA4PHjR3fv3n7w4P6PHz8gIgzfv39///7958+fgZxv3749f/7szZs3QBGGSRP7qsuzp0ye8O/f/w3r1zY3lPV1N02bOgkAR4J4gdhT92wAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6};let j=[{depth:2,value:"Java NIO",id:"java-nio"},{depth:2,value:"Channel, Buffer 의 개념",id:"channel-buffer-의-개념"},{depth:2,value:"Buffer 클래스의 종류",id:"buffer-클래스의-종류"},{depth:2,value:"Java NIO 의 주요 Buffer들 (커널 접근 가능 여부 등)",id:"java-nio-의-주요-buffer들-커널-접근-가능-여부-등"},{depth:3,value:"DirectByteBuffer",id:"directbytebuffer"},{depth:3,value:"HeapByteBuffer",id:"heapbytebuffer"},{depth:2,value:"Buffer 의 위치 관련 주요 필드",id:"buffer-의-위치-관련-주요-필드"},{depth:2,value:"Buffer 의 주요 메서드",id:"buffer-의-주요-메서드"},{depth:3,value:"flip()",id:"flip"},{depth:3,value:"rewind() 메서드",id:"rewind-메서드"},{depth:3,value:"clear() 메서드",id:"clear-메서드"},{depth:3,value:"Buffer 위치 이동 메서드 연습 예제",id:"buffer-위치-이동-메서드-연습-예제"},{depth:2,value:"Java NIO 사용시 Non Blocking 방식으로 사용하는 방법",id:"java-nio-사용시-non-blocking-방식으로-사용하는-방법"},{depth:2,value:"NIO 기반 간단한 소켓 프로그래밍 예제",id:"nio-기반-간단한-소켓-프로그래밍-예제"}];function _createMdxContent(e){let n=Object.assign({h2:"h2",p:"p",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",img:"img",ul:"ul",li:"li",h3:"h3",pre:"pre",span:"span"},(0,a.a)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"java-nio",children:"Java NIO"}),"\n",(0,s.jsxs)(n.p,{children:["Java NIO 는 ",(0,s.jsx)(n.code,{children:"Java New Input/Output"})," 을 의미합니다. (Non blocking IO 를 의미하는 것은 아닙니다.)",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["Java NIO 는 Java 1.4 에서 처음 도입되었고 파일과 네트워크에 데이터를 읽고 쓸 수 있는 API 를 제공하고 있습니다. 대부분의 I/O에 대해서는 논블로킹 방식의 동기 연산을 지원하지만 Java NIO 역시 File I/O 의 경우는 블로킹 방식의 동기 연산만 지원됩니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["Selector, Channel 기반으로 높은 성능을 제공하는데, 톰캣에서도 NIO가 지원되고 Netty 역시 NIO 기반으로 이루어져 있습니다. 다만 톰캣의 경우 스레드 풀 기반으로 커넥션 풀을 관리하는데 스레드를 그대로 가져다 쓰는 것으로 인해 Netty 에 비해 조금은 무거운 컨테이너입니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["JAVA IO 는 byte 또는 character 기반의 데이터 단위로 데이터를 처리하지만 Java NIO 는 buffer 단위로 데이터를 처리합니다. Java IO 에서는 흔히 잘 알려져 있는 InputStream, OutputStream 을 이용해서 데이터를 처리하지만 Java NIO 에서는 Channel 단위로 데이터를 처리합니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["지금까지의 내용을 정리해보면 아래와 같습니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{align:"center",children:"Java NIO"}),(0,s.jsx)(n.th,{align:"center",children:"Java IO"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"데이터 처리 방향"}),(0,s.jsx)(n.td,{align:"center",children:"양방향"}),(0,s.jsx)(n.td,{align:"center",children:"단방향"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"데이터 처리 방식"}),(0,s.jsx)(n.td,{align:"center",children:"Channel"}),(0,s.jsx)(n.td,{align:"center",children:"InputStream, OutputStream"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"데이터 단위"}),(0,s.jsx)(n.td,{align:"center",children:"buffer"}),(0,s.jsx)(n.td,{align:"center",children:"byte, character"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"nonblocking?"}),(0,s.jsx)(n.td,{align:"center",children:"File IO를 제외한 모든 IO에 대해 논블로킹방식의 동기연산을 지원"}),(0,s.jsx)(n.td,{align:"center",children:"모든 IO 연산을 Blocking 방식의 동기연산으로만 수행 가능"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"etc"}),(0,s.jsx)(n.td,{align:"center",children:"Selector 지원"}),(0,s.jsx)(n.td,{align:"center"})]})]})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"channel-buffer-의-개념",children:"Channel, Buffer 의 개념"}),"\n",(0,s.jsxs)(n.p,{children:["위에서 살펴봤던 표에서는 ",(0,s.jsx)(n.code,{children:"Channel"}),", ",(0,s.jsx)(n.code,{children:"Buffer"})," 의 개념을 설명해보겠습니다. ",(0,s.jsx)(n.code,{children:"Buffer"})," 는 데이터를 읽거나 쓰기 위해 데이터를 저장하는 용도로 사용합니다. 그리고 이 ",(0,s.jsx)(n.code,{children:"Buffer"})," 에 접근하기 위해서는 ",(0,s.jsx)(n.code,{children:"Channel"})," 의 read(), write() 함수를 사용해서 읽거나 쓰는 행동을 수행합니다."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{placeholder:"blur",src:o})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"read() 함수를 수행할 때에는 사이즈에 맞는 Buffer 를 생성하고 Channel 으l read()  를 사용해서 File 의 내용들을 Buffer 에 기록합니다."}),"\n",(0,s.jsx)(n.li,{children:"write() 함수를 수행할 때에는 사이즈에 맞는 Buffer 를 생성하고 Channel 의 write() 를 사용해서 File 에 Buffer 에 있는 내용들을 기록합니다."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"buffer-클래스의-종류",children:"Buffer 클래스의 종류"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{placeholder:"blur",src:c})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["ByteBuffer : byte 단위로 데이터를 읽고 씁니다. 하위자료형으로는 HeapByteBuffer, MappedByteBuffer, DirectByteBuffer 가 있습니다. 이 Buffer 들에 대해서는 이 문서 내의 ",(0,s.jsx)(n.code,{children:"Java NIO의 주요 Buffer들 (커널 접근 가능 여부 등)"})," 에 정리해두었습니다."]}),"\n",(0,s.jsxs)(n.li,{children:["CharBuffer, ShortBuffer, IntBuffer, LongBuffer","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"각각 char 단위, short 단위, int 단위, long 단위를 읽을 수 있는 버퍼입니다."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"FloatBuffer, DoubleBuffer : 실수자료형을 취급하는 Buffer 입니다."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"java-nio-의-주요-buffer들-커널-접근-가능-여부-등",children:"Java NIO 의 주요 Buffer들 (커널 접근 가능 여부 등)"}),"\n",(0,s.jsx)(n.h3,{id:"directbytebuffer",children:"DirectByteBuffer"}),"\n",(0,s.jsxs)(n.p,{children:["DirectByteBuffer 는 ",(0,s.jsx)(n.code,{children:"off-heap"})," 메모리에 데이터를 저장합니다. 커널 메모리에서 복사ㅡㄹ 하지 않기에 데이터를 읽고 쓰는 속도가 빠릅니다. 다만 비용이 많이 드는 System Call 을 사용하기에 allocate, deallocate가 느리다는 단점이 있습니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["allocateDirect() 함수로 생성가능합니다. 아래는 ",(0,s.jsx)(n.code,{children:"DirectByteBuffer"})," 를 생성하는 예제 코드입니다."]}),"\n",(0,s.jsx)(n.pre,{"data-language":"java","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"java","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" directByteBuffer "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"ByteBuffer"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"allocateDirect"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1024"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"assert"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"directByteBuffer"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"isDirect"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(); "})]})]})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"heapbytebuffer",children:"HeapByteBuffer"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"HeapByteBuffer"})," 는 데이터를 JVM Heap 메모리에 저장합니다. byte array 를 래핑하는 Buffer 인데, 커널 메모리에서 복사해서 저장하는 버퍼이기에 복사에 대한 연산으로 인해 커널을 한번 더 IO 가 일어난다는 점에서 읽기 속도가 느리다는 단점이 있습니다. (내부적으로는 임시로 Direct Buffer 를 만드는 연산을 수행하기에 성능이 저하됩니다.)",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["GC에 의해 관리되기에 allocate, deallocate 가 빠릅니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.p,{children:["allocate() 함수 또는 wrap() 함수로 생성 가능합니다. 아래는 ",(0,s.jsx)(n.code,{children:"HeapByteBuffer"})," 를 생성하는 예제 코드 입니다."]}),"\n",(0,s.jsx)(n.pre,{"data-language":"java","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"java","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" heapByteBuffer "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"ByteBuffer"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"allocate"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1024"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"assert"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"heapByteBuffer"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"isDirect"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(); "})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" byteBufferByWrap "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"ByteBuffer"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"wrap"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hello"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"getBytes"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()); "})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"assert"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"byteBufferByWrap"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"isDirect"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})]})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"buffer-의-위치-관련-주요-필드",children:"Buffer 의 위치 관련 주요 필드"}),"\n",(0,s.jsx)(n.p,{children:"Buffer 에는 위치를 가리키는 주요 속성들이 있는데 이 속성들을 가리키는 메서드를 적절히 사용해야 NIO 소켓 프로그래밍 시에 유용하게 사용이 가능합니다."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["capacity","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Buffer 가 저장할 수 있는 데이터의 최대 크기를 의미합니다. Buffer 생성시 지정해서 Buffer를 지정된 사이즈로 생성합니다. 한번 생성된 Buffer 사이즈는 변경이 불가합니다."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["position","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Buffer 에서의 현재 위치를 가리키는 역할을 합니다. 버퍼에서 데이터를 읽거나 쓸때 현재 위치에서부터 시작하게 되고 Buffer 에 1Byte 가 추가될 때마다 1씩 위치 값이 증가합니다."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["limit","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Buffer 에서 데이터를 읽거나 쓸 수 있는 마지막 위치를 의미합니다. capacity 와 같은 값입니다."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["mark","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"현재 position 위치를 mark() 로 지정하는 것이 가능합니다. reset()을 호출할 경우에는 position 을 mark 로이동시킵니다."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.p,{children:"각 위치(오프셋) 또는 사이즈의 범위의 위치 등을 표현해보면 아래와 같습니다."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"0 <= mark <= position <= limit <= capacity"})}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{placeholder:"blur",src:h})}),"\n",(0,s.jsxs)(n.p,{children:["Buffer 는 생성시에 capacity 를 기준으로 크기가 설정되는데 따라서 capacity 는 초기에 지정한 size 이기에 가장 맨 뒤의 위치를 가리키게 됩니다. limit 은 Buffer 생성 초기에는 capacity 가 가리키는 위치를 함께 가리킵니다. 그리고 데이터를 읽을 때는 처음부터 읽어야 하기 때문에 position 은 0 으로 초기에 세팅됩니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"buffer-의-주요-메서드",children:"Buffer 의 주요 메서드"}),"\n",(0,s.jsx)(n.h3,{id:"flip",children:"flip()"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{placeholder:"blur",src:d})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["flip() 메서드","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"buffer 의 limit 위치를 현재 position 으로 위치시킵니다."}),"\n",(0,s.jsx)(n.li,{children:"limit의 위치 변경이 완료되면 position 의 위치를 0으로 변경합니다."}),"\n",(0,s.jsx)(n.li,{children:"buffer 를 쓰기 모드에서 읽기 모드로 전환할 때 사용합니다."}),"\n",(0,s.jsx)(n.li,{children:"현재까지 읽던 위치로 limit 의 위치를 변경해서 position 을 0으로 해서 처음부터 limit 까지 읽는 동작을 의미합니다."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"rewind-메서드",children:"rewind() 메서드"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{placeholder:"blur",src:x})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["rewind()","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"데이터를 처음부터 limit 만큼 읽어들일 때 사용하는 함수입니다. 데이터를 처음부터 읽어들이려 하는데 읽어들일 사이즈를 limit으로 지정합니다."}),"\n",(0,s.jsx)(n.li,{children:"buffer 내의 position 을 0 으로 변경하는 이유는 데이터를 처음부터 다시 읽어들이기 위해서입니다."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"clear-메서드",children:"clear() 메서드"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{placeholder:"blur",src:p})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["clear()","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"버퍼를 초기화 할 때 사용합니다. 버퍼를 초기화하므로 모든 위치(오프셋) 관련 변수들은 기본 값으로 변경해줍니다."}),"\n",(0,s.jsx)(n.li,{children:"buffer 내의 limit 포인터의 위치는 capacity 의 위치로 바꿔주고, position 은 버퍼의 제일 앞 부분인 0 으로 초기화 해줍니다."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"buffer-위치-이동-메서드-연습-예제",children:"Buffer 위치 이동 메서드 연습 예제"}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"java-nio-사용시-non-blocking-방식으로-사용하는-방법",children:"Java NIO 사용시 Non Blocking 방식으로 사용하는 방법"}),"\n",(0,s.jsxs)(n.p,{children:["SocketChannel, ServerSeocketChannel 이 extends 하고 있는 AbstractSelectableChannel 은 ",(0,s.jsx)(n.code,{children:"SelectableChannel"})," 을 extends 하고 있습니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{placeholder:"blur",src:k})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.p,{children:["그리고 ",(0,s.jsx)(n.code,{children:"SelectableChannel"})," 은 ",(0,s.jsx)(n.code,{children:"configureBlocking(boolean)"}),", ",(0,s.jsx)(n.code,{children:"register()"})," 함수를 제공하는데 그 중 ",(0,s.jsx)(n.code,{children:"configureBlocking(boolean)"})," 메서드를 이용해 논블로킹을 지정가능합니다."]}),"\n",(0,s.jsxs)(n.p,{children:["serverSocketChannel 의 accept(), socketChannel 의 connect() 사용시 위의 configureBlocking(boolean) 을 사용하면 논블로킹으로 네트워크 IO를 할지여부를 지정가능합니다.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(n.p,{children:"e.g. ServerSocketChannel 의 accept() 메서드를 nonblocking 하게 실행"}),"\n",(0,s.jsx)(n.pre,{"data-language":"java","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"java","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"try"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" serverChannel "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"ServerSocketChannel"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"open"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()){"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" address "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"InetSocketAddress("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"localhost"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"8080"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:")"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"serverChannel"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"bind"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(address);"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"serverChannel"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"configureBlocking"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"/// nonblocking 설정 "})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" clientSocket "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"serverChannel"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"accept"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(); "})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"assert"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" clientSocket "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"!=="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"null"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.p,{children:"e.g. SocketChannel 의 connect() 메서드를 nonblocking 하게 실행"}),"\n",(0,s.jsx)(n.pre,{"data-language":"java","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"java","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"try"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" socketChannel "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"SocketChannel"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"open"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()){"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" address "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"InetSocketAddress("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"localhost"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"8080"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:")"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"socketChannel"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"configureBlocking"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" connected "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"socketChannel"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"connect"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(address);"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"assert"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"connected;"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"nio-기반-간단한-소켓-프로그래밍-예제",children:"NIO 기반 간단한 소켓 프로그래밍 예제"}),"\n",(0,s.jsx)("br",{})]})}let u={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.a)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/nio-and-netty/what-is-nio.mdx",route:"/nio-and-netty/what-is-nio",timestamp:1709653591e3,pageMap:[{kind:"Folder",name:"concurrent-programming-basic",route:"/concurrent-programming-basic",children:[{kind:"MdxPage",name:"blocking-vs-nonblocking",route:"/concurrent-programming-basic/blocking-vs-nonblocking"},{kind:"MdxPage",name:"sync-vs-async",route:"/concurrent-programming-basic/sync-vs-async"},{kind:"Meta",data:{"sync-vs-async":"동기 vs 비동기","blocking-vs-nonblocking":"블로킹 vs 논 블로킹"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"nio-and-netty",route:"/nio-and-netty",children:[{kind:"MdxPage",name:"java-io-java-nio-java-aio",route:"/nio-and-netty/java-io-java-nio-java-aio"},{kind:"MdxPage",name:"java-socket-communication",route:"/nio-and-netty/java-socket-communication"},{kind:"MdxPage",name:"tomcat-vs-netty",route:"/nio-and-netty/tomcat-vs-netty"},{kind:"MdxPage",name:"what-is-aio",route:"/nio-and-netty/what-is-aio"},{kind:"MdxPage",name:"what-is-nio",route:"/nio-and-netty/what-is-nio"},{kind:"Meta",data:{"java-io-java-nio-java-aio":"Java IO,NIO,AIO","java-socket-communication":"Java 의 소켓 통신방식","what-is-nio":"NIO 의 개념, 장점","what-is-aio":"AIO 의 개념, 특징","tomcat-vs-netty":"Tomcat vs Netty"}}]},{kind:"Folder",name:"r2dbc-mysql",route:"/r2dbc-mysql",children:[{kind:"MdxPage",name:"example",route:"/r2dbc-mysql/example"},{kind:"MdxPage",name:"what-is-r2dbc",route:"/r2dbc-mysql/what-is-r2dbc"},{kind:"Meta",data:{"what-is-r2dbc":"R2DBC 란?",example:"예제"}}]},{kind:"Folder",name:"reactive-mongodb",route:"/reactive-mongodb",children:[{kind:"MdxPage",name:"example",route:"/reactive-mongodb/example"},{kind:"Meta",data:{example:"예제"}}]},{kind:"Folder",name:"reactive-programming",route:"/reactive-programming",children:[{kind:"MdxPage",name:"intro",route:"/reactive-programming/intro"},{kind:"MdxPage",name:"proactor-pattern",route:"/reactive-programming/proactor-pattern"},{kind:"MdxPage",name:"reactive-programming",route:"/reactive-programming/reactive-programming"},{kind:"MdxPage",name:"reactor-pattern",route:"/reactive-programming/reactor-pattern"},{kind:"MdxPage",name:"what-is-epool",route:"/reactive-programming/what-is-epool"},{kind:"MdxPage",name:"what-is-reactive",route:"/reactive-programming/what-is-reactive"},{kind:"Meta",data:{intro:"intro","what-is-reactive":"Reactive란?","reactive-programming":"Reactive Programming","what-is-epoll":"epoll 이란?","reactor-pattern":"reactor 패턴","proactor-pattern":"proactor 패턴","what-is-epool":"What Is Epool"}}]},{kind:"Folder",name:"server-sent-event",route:"/server-sent-event",children:[{kind:"MdxPage",name:"example",route:"/server-sent-event/example"},{kind:"MdxPage",name:"what-is-sse",route:"/server-sent-event/what-is-sse"},{kind:"Meta",data:{"what-is-sse":"SSE (Server Sent Event) 의 개념",example:"예제코드"}}]},{kind:"Folder",name:"webflux-websocket",route:"/webflux-websocket",children:[{kind:"MdxPage",name:"example",route:"/webflux-websocket/example"},{kind:"Meta",data:{example:"예제"}}]},{kind:"Meta",data:{index:"Introduction","concurrent-programming-basic":"동시성 프로그래밍 개념들","nio-and-netty":"NIO, Netty","reactive-programming":"Reactive Programming","server-sent-event":"Server Sent Event (SSE)","webflux-websocket":"Webflux Websocket","r2dbc-mysql":"Spring Data R2dbc",contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"What Is Nio",headings:j},pageNextRoute:"/nio-and-netty/what-is-nio",nextraLayout:t.ZP,themeConfig:l.Z};var v=(0,i.j)(u)},8426:function(e,n,r){"use strict";var s=r(5893);r(7294);let i={logo:(0,s.jsx)("span",{children:"Docs Spring Webflux"}),project:{link:"https://github.com/chagchagchag/docs-spring-webflux"},docsRepositoryBase:"https://github.com/chagchagchag/docs-spring-webflux",footer:{text:"Nextra Docs Template"}};n.Z=i},5789:function(){}},function(e){e.O(0,[774,796,888,179],function(){return e(e.s=5298)}),_N_E=e.O()}]);