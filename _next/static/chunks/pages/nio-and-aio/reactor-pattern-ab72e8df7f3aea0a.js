(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4193],{2707:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nio-and-aio/reactor-pattern",function(){return r(3620)}])},3620:function(e,n,r){"use strict";r.r(n),r.d(n,{__toc:function(){return d},default:function(){return p}});var a=r(5893),s=r(2673),i=r(373),t=r(8426);r(9128);var o=r(2643),c={src:"/docs-spring-webflux/_next/static/media/PLAN.f0934d85.png",height:718,width:746,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAdVBMVEX////+/v79/f38/f38/Pz7+/v6+vr4+Pj29vb09PTz8/Tz8/Py8vLv7+/u7u7q6enp6enp6ejn5+bg4ODW1tTV1dXNzMvMy8rDw8LBwL+9vb27u7mvr62opqGjo6KXlpSXlY+Vk4yQj4uPjop2cmZwalNsaVw0+KKvAAAARElEQVR42g3BBwJAMAwF0B9aDWLV3tv9jyjvgcURQY3vbeGbGnElEfp1QntumUnLHOILDudvhzLUHQtIWZcwCBRgeK4fdk0DOFpIp/YAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},l={src:"/docs-spring-webflux/_next/static/media/HIERARCHY.33c14b2d.png",height:238,width:416,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAAAAABd+vKJAAAALklEQVR42g3IwREAIAgDsO6/rSLCwZVqnoE0mWYNsj1IwS3/nYCGo26iVim33Qdv3CcJBfHccwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5};let d=[{depth:2,value:"Reactor Pattern",id:"reactor-pattern"},{depth:2,value:"Reactor Pattern 이란?",id:"reactor-pattern-이란"}];function _createMdxContent(e){let n=Object.assign({h2:"h2",p:"p",pre:"pre",code:"code",span:"span",ul:"ul",li:"li",img:"img"},(0,o.a)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"reactor-pattern",children:"Reactor Pattern"}),"\n",(0,a.jsx)(n.p,{children:"Reactor Pattern 을 적용하기 전, 이전에 살펴본 nio 채팅 코드는 아래와 같았습니다."}),"\n",(0,a.jsx)(n.pre,{"data-language":"java","data-theme":"default",children:(0,a.jsxs)(n.code,{"data-language":"java","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"key"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"isAcceptable"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()){ "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// ACCEPT 이벤트일 경우"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// (1)"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// accept 를 통해 ClientSocket 획득"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" clientSocket "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ((ServerSocketChannel) "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"key"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"channel"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"())"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"accept"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// clientSocket 을 non-blocking 으로 설정"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"clientSocket"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"configureBlocking"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// clientSocket 을 selector 에 등록"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"clientSocket"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"register"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(selector"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"SelectionKey"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"OP_READ"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"key"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"isReadable"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()){ "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// READ 이벤트 일 때"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// clientSocket 을 얻어옴"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" clientSocket "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (SocketChannel) "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"key"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"channel"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" requestBuffer "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"ByteBuffer"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"allocate"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1024"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// (2)"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"clientSocket"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"read"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(requestBuffer); "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// clientSocket 으로부터 데이터 Read"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"requestBuffer"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"flip"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" received "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"String("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"requestBuffer"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"array())"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"trim"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"log"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"client received = {}"'}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" received);"})]}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" send "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"답장보냅니다."'}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" responseBuffer "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"ByteBuffer"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"wrap"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"send"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"getBytes"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"());"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"clientSocket"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"write"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(responseBuffer);"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"responseBuffer"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"clear"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"clientSocket"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"close"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})})]})}),"\n",(0,a.jsxs)(n.p,{children:["(1), (2) 로 표시한 부분에서는 accept, read 를 함수 호출로 처리하고 있습니다. 이렇게 함수를 그대로 작성해서 하는 것 보다는 조금은 확장성이 가능하도록 하는 코드를 작성해야 할 것 같습니다. 이번 문서에서는 이런 Plain 한 통신 로직을 Reactor Pattern 으로 바꾸면 어떻게 되는지를 확인해봅니다. Reactor 패턴은 이벤트를 감지하고 분류하는 Reactor 와 이벤트를 처리하는 Handler 로 이뤄져 있습니다.",(0,a.jsx)("br",{})]}),"\n",(0,a.jsx)(n.h2,{id:"reactor-pattern-이란",children:"Reactor Pattern 이란?"}),"\n",(0,a.jsx)(n.p,{children:"Reactor 패턴은 동시에 들어오는 요청들을 처리하기 위해 만들어진 이벤트 핸들링 패턴입니다. Reactor 패턴에는 Reactor, Dispatcher, Handler 라고 하는 대표적인 3 요소가 있습니다."}),"\n",(0,a.jsx)(n.p,{children:"Reactor"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"별도의 스레드에서 실행됩니다."}),"\n",(0,a.jsx)(n.li,{children:"여러 요청의 Write, Accept, Read 이벤트를 한 곳에 등록 후 관찰하는 역할을 수행합니다."}),"\n",(0,a.jsx)(n.li,{children:"Connection 수립 후 TCP Handler 를 SelectionKey 에 대한 attachment 로 등록합니다."}),"\n",(0,a.jsx)(n.li,{children:"Selector로 select() 를 통해 이벤트가 발생했음을 감지했을 때 이벤트들 각각을 처리하는 것은 Dispatcher 가 처리하게끔 유도합니다."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Dispatcher"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Reactor 로부터 전달받은 SelectionKey 내에 등록된 attachment 를 읽어들이는데, 이때 보통 attachment 는 EventHandler 입니다."}),"\n",(0,a.jsx)(n.li,{children:"Dispatcher 는 Handler가 Acceptor 인지 HttpEventHandler 인지는 모르고, 단순히 SelectionKey 에 attachment 로 등록된 EventHandler 타입의 handle() 을 호출합니다."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Handler"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Handler 의 종류는 아래와 같이 구분했습니다.","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Socket Accept 를 위한 용도의 Handler인 Acceptor"}),"\n",(0,a.jsx)(n.li,{children:"TCP 요청을 읽은 후 응답(Response)하기 위한 TcpEventHandler"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{placeholder:"blur",src:c})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:"Reactor"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"이번 예제에서는 Selector 를 Reactor 라는 이름으로 사용합니다."}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:"Dispatch"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"이번예제에서는 Dispatch 는 객체로 선언하지 않고 Reactor 내에 dispatch() 라는 메서드로 구현해두었습니다."}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsxs)(n.p,{children:["이번 예제에서 구현하려는 Acceptor, TcpEventHandler 의 기능을 요약해보면 아래와 같습니다.",(0,a.jsx)("br",{})]}),"\n",(0,a.jsx)(n.p,{children:"Acceptor"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Acceptor 는 Application 전역적으로 1개의 객체만 존재합니다."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Acceptor 가 handle() 을 수행할 때 ServerSocketChannel 이 accept() 를 성공적으로 수립했을 때 생성된 클라이언트의 SocketChannel 을 획득합니다."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"이후에 TcpEventhHandler 객체를 생성하고, TcpEventHandler 객체 생성시에, 객체 내에 클라이언트의 SocketChannel 을 전달해주어 클라이언트 소켓을 바인딩해줍니다."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"신규 접속 생성시마다 해당하는 커넥션 하나당 하나의 HttpEventHandler 객체를 새로 생성합니다."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"TcpEventHandler"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"TcpEventHandler 는 전달받은 클라이언트 SocketChannel 을 이용해서 아래의 작업들을 수행합니다."}),"\n",(0,a.jsx)(n.li,{children:"객체 생성 시에 전달받은 SocketChannel 을 Selector 에 등록해주고, 자기자신을 attachment 로 등록해줍니다."}),"\n",(0,a.jsx)(n.li,{children:"따라서 Accept 이벤트가 아닌 Readable 이벤트일 경우 TcpEventHandler 를 거치게 됩니다."}),"\n",(0,a.jsx)(n.li,{children:"요청으로 전달된 request 를 읽어들입니다."}),"\n",(0,a.jsx)(n.li,{children:"요청 처리, 응답(send - clientSocket.write()) 을 수행합니다"}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:"Acceptor, TcpEventHandler 는 Dispatch 입장에서는 EventHandler 라는 추상타입의 handle() 메서드를 통해 처리합니다. Dispatcher 입장에서는 Acceptor, TcpEventHandler 타입의 구체적인 동작을 알 필요 없이 EventHandler 의 handle() 메서드만을 호출하는 역할만을 수행합니다."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{placeholder:"blur",src:l})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsxs)(n.p,{children:["예제는 별도의 실습 문서 들에서 따로 정리하며 예제는 아래의 두 종류의 예제를 예제로 수행합니다.",(0,a.jsx)("br",{})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Reactor 패턴 기반의 소켓 프로그램"}),"\n",(0,a.jsx)(n.li,{children:"Reactor 패턴 기반의 Http 서버 프로그램"}),"\n"]}),"\n",(0,a.jsx)("br",{})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.a)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/nio-and-aio/reactor-pattern.mdx",route:"/nio-and-aio/reactor-pattern",timestamp:1713350307e3,pageMap:[{kind:"Folder",name:"concurrent-programming-basic",route:"/concurrent-programming-basic",children:[{kind:"MdxPage",name:"blocking-vs-nonblocking",route:"/concurrent-programming-basic/blocking-vs-nonblocking"},{kind:"MdxPage",name:"completable-future-completion-stage",route:"/concurrent-programming-basic/completable-future-completion-stage"},{kind:"MdxPage",name:"executor-service",route:"/concurrent-programming-basic/executor-service"},{kind:"MdxPage",name:"sync-vs-async",route:"/concurrent-programming-basic/sync-vs-async"},{kind:"Meta",data:{"sync-vs-async":"동기 vs 비동기","blocking-vs-nonblocking":"블로킹 vs 논 블로킹","executor-service":"ExecutorService","completable-future-completion-stage":"CompletableFuture, CompletableStage"}}]},{kind:"MdxPage",name:"concurrent-programming-basic",route:"/concurrent-programming-basic"},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"kotlin-coroutine",route:"/kotlin-coroutine",children:[{kind:"Meta",data:{}}]},{kind:"MdxPage",name:"kotlin-coroutine",route:"/kotlin-coroutine"},{kind:"MdxPage",name:"netty",route:"/netty"},{kind:"Folder",name:"nio-and-aio",route:"/nio-and-aio",children:[{kind:"MdxPage",name:"java-io-java-nio-java-aio",route:"/nio-and-aio/java-io-java-nio-java-aio"},{kind:"MdxPage",name:"java-nio-socket-communication",route:"/nio-and-aio/java-nio-socket-communication"},{kind:"MdxPage",name:"proactor-pattern",route:"/nio-and-aio/proactor-pattern"},{kind:"MdxPage",name:"reactor-pattern-based-http-server",route:"/nio-and-aio/reactor-pattern-based-http-server"},{kind:"MdxPage",name:"reactor-pattern-socket-communication",route:"/nio-and-aio/reactor-pattern-socket-communication"},{kind:"MdxPage",name:"reactor-pattern",route:"/nio-and-aio/reactor-pattern"},{kind:"MdxPage",name:"what-is-aio",route:"/nio-and-aio/what-is-aio"},{kind:"MdxPage",name:"what-is-nio",route:"/nio-and-aio/what-is-nio"},{kind:"Meta",data:{"java-io-java-nio-java-aio":"Java IO,NIO,AIO","what-is-nio":"NIO 의 개념, 특징, 주요 클래스","java-nio-socket-communication":"Java NIO 소켓통신","reactor-pattern":"Reactor 패턴","reactor-pattern-socket-communication":"Reactor 패턴 소켓통신, 예제","reactor-pattern-based-http-server":"Reactor 패턴 기반의 HTTP 서버 예제","proactor-pattern":"proactor 패턴","what-is-aio":"AIO 의 개념, 특징, 예제"}}]},{kind:"MdxPage",name:"nio-and-aio",route:"/nio-and-aio"},{kind:"Folder",name:"reactive-programming",route:"/reactive-programming",children:[{kind:"MdxPage",name:"java-nio-bad-point-and-solution",route:"/reactive-programming/java-nio-bad-point-and-solution"},{kind:"MdxPage",name:"netflix-rxjava-story",route:"/reactive-programming/netflix-rxjava-story"},{kind:"MdxPage",name:"publisher-subscriber-subscription-backpressure",route:"/reactive-programming/publisher-subscriber-subscription-backpressure"},{kind:"MdxPage",name:"reactive-streams-libraries",route:"/reactive-programming/reactive-streams-libraries"},{kind:"MdxPage",name:"webflux-backpressure-handling",route:"/reactive-programming/webflux-backpressure-handling"},{kind:"MdxPage",name:"what-is-epoll",route:"/reactive-programming/what-is-epoll"},{kind:"MdxPage",name:"what-is-reactive",route:"/reactive-programming/what-is-reactive"},{kind:"Meta",data:{"what-is-reactive":"Reactive란?","netflix-rxjava-story":"Netflix RxJava 이야기","publisher-subscriber-subscription-backpressure":"Publisher,Subscriber,Subscription,Backpressure","reactive-streams-libraries":"Reactive Streams 라이브러리들","webflux-backpressure-handling":"Spring Webflux 에서 Backpressure 핸들링","java-nio-bad-point-and-solution":"Java NIO 의 논블로킹 방식 동기연산의 문제점과 해결책, 멀티플렉싱","what-is-epoll":"epoll 이란?"}}]},{kind:"MdxPage",name:"reactive-programming",route:"/reactive-programming"},{kind:"MdxPage",name:"reactor",route:"/reactor"},{kind:"Folder",name:"server-sent-event",route:"/server-sent-event",children:[{kind:"MdxPage",name:"what-is-sse",route:"/server-sent-event/what-is-sse"},{kind:"Meta",data:{"what-is-sse":"SSE (Server Sent Event) 개념, Spring Webflux, 예제"}}]},{kind:"MdxPage",name:"server-sent-event",route:"/server-sent-event"},{kind:"Folder",name:"spring-cloud-reactive-circuitbreaker",route:"/spring-cloud-reactive-circuitbreaker",children:[{kind:"MdxPage",name:"reactive-circuit-breaker-basic",route:"/spring-cloud-reactive-circuitbreaker/reactive-circuit-breaker-basic"},{kind:"Meta",data:{"reactive-circuit-breaker-basic":"Reactive Cricuit Breaker"}}]},{kind:"MdxPage",name:"spring-cloud-reactive-circuitbreaker",route:"/spring-cloud-reactive-circuitbreaker"},{kind:"Folder",name:"spring-cloud-stream-and-kafka",route:"/spring-cloud-stream-and-kafka",children:[{kind:"MdxPage",name:"kafka-basic",route:"/spring-cloud-stream-and-kafka/kafka-basic"},{kind:"MdxPage",name:"kafka-docker-compose",route:"/spring-cloud-stream-and-kafka/kafka-docker-compose"},{kind:"MdxPage",name:"spring-cloud-stream-kafka-binder",route:"/spring-cloud-stream-and-kafka/spring-cloud-stream-kafka-binder"},{kind:"MdxPage",name:"spring-cloud-stream",route:"/spring-cloud-stream-and-kafka/spring-cloud-stream"},{kind:"Meta",data:{"kafka-basic":"Kafka 의 주요 개념들","kafka-docker-compose":"Kafak 로컬 개발환경 (docker-compose)","spring-cloud-stream":"Spring Cloud Stream","spring-cloud-stream-kafka-binder":"Spring Cloud Stream Kafka Binder"}}]},{kind:"MdxPage",name:"spring-cloud-stream-and-kafka",route:"/spring-cloud-stream-and-kafka"},{kind:"MdxPage",name:"spring-data-reactive",route:"/spring-data-reactive"},{kind:"Folder",name:"spring-webflux",route:"/spring-webflux",children:[{kind:"MdxPage",name:"annotated-controller",route:"/spring-webflux/annotated-controller"},{kind:"MdxPage",name:"codec",route:"/spring-webflux/codec"},{kind:"MdxPage",name:"dispatcher-handler-communication-spring-webflux",route:"/spring-webflux/dispatcher-handler-communication-spring-webflux"},{kind:"MdxPage",name:"reactor-programming-all-2",route:"/spring-webflux/reactor-programming-all-2"},{kind:"MdxPage",name:"reactor-programming-all-3",route:"/spring-webflux/reactor-programming-all-3"},{kind:"MdxPage",name:"reactor-programming-all",route:"/spring-webflux/reactor-programming-all"},{kind:"MdxPage",name:"servlet-stack-vs-reactive-stack",route:"/spring-webflux/servlet-stack-vs-reactive-stack"},{kind:"MdxPage",name:"spring-mvc-vs-spring-webflux",route:"/spring-webflux/spring-mvc-vs-spring-webflux"},{kind:"Meta",data:{"servlet-stack-vs-reactive-stack":"Servlet Stack vs Reactive Stack","spring-mvc-vs-spring-webflux":"Spring MVC vs Spring Webflux","dispatcher-handler-communication-spring-webflux":"DispatcherHandler 와 Spring Webflux","annotated-controller":"Annotated Controller",codec:"Codec","reactor-programming-all":"Reactor 프로그래밍 (스압 주의)","reactor-programming-all-2":"Reactor 프로그래밍 2 (Thread, Scheduler, defer())","reactor-programming-all-3":"Reactor 프로그래밍 3 (Error 핸들링)"}}]},{kind:"MdxPage",name:"spring-webflux",route:"/spring-webflux"},{kind:"Folder",name:"webflux-websocket",route:"/webflux-websocket",children:[{kind:"MdxPage",name:"what-is-websocket",route:"/webflux-websocket/what-is-websocket"},{kind:"Meta",data:{"what-is-websocket":"Websocket 개념, Spring Webflux, 예제"}}]},{kind:"MdxPage",name:"webflux-websocket",route:"/webflux-websocket"},{kind:"Meta",data:{index:"Introduction","concurrent-programming-basic":"동시성 프로그래밍 개념들","nio-and-aio":"NIO, AIO",netty:"Netty",reactor:"Reactor","reactive-programming":"Reactive Programming","spring-webflux":"Spring Webflux","spring-cloud-stream-and-kafka":"Spring Cloud Stream & Kafka","spring-cloud-reactive-circuitbreaker":"Spring Cloud Reactive Circuit Breaker","kotlin-coroutine":"Kotlin Coroutine","server-sent-event":"Server Sent Event (SSE)","webflux-websocket":"Webflux Websocket","spring-data-reactive":"Spring Data Reactive",contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"Reactor Pattern",headings:d},pageNextRoute:"/nio-and-aio/reactor-pattern",nextraLayout:i.ZP,themeConfig:t.Z};var p=(0,s.j)(h)},8426:function(e,n,r){"use strict";var a=r(5893);r(7294);let s={logo:(0,a.jsx)("span",{children:"Docs Spring Webflux"}),project:{link:"https://github.com/chagchagchag/docs-spring-webflux"},docsRepositoryBase:"https://github.com/chagchagchag/docs-spring-webflux",footer:{text:"Nextra Docs Template"}};n.Z=s},5789:function(){}},function(e){e.O(0,[9774,6796,2888,179],function(){return e(e.s=2707)}),_N_E=e.O()}]);